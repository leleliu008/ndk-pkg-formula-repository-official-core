pkgtype: exe
summary: New way to see and navigate directory trees
web-url: https://dystroy.org/broot/
git-url: https://github.com/Canop/broot
src-url: https://github.com/Canop/broot/archive/refs/tags/v1.37.0.tar.gz
src-sha: 59335d101b943a7907ceb1ef2d4cf29e755cdf062d3459ebfc294965d4be0e7d
license: MIT
dep-pkg: libgetloadavg libgit2
install: cargow install --locked

dopatch: |
    run cargo fetch --target "$RUST_TARGET"

    for f in $CARGO_HOME/registry/src/*/libgit2-sys-*/build.rs ; do
        sed -i -E 's/\.range_version\(([^)]*)\.\.[^)]*\)/.atleast_version(\1)/g' "${f}"
    done

    sed_in_place '/trash/d' Cargo.toml

fix-url: https://raw.githubusercontent.com/termux/termux-packages/master/packages/broot/disable-trash.patch
fix-sha: e9d5acd2e7bfbe4c036c54bd24609aa8edaa40c9d00247fa7989742a06afb509
